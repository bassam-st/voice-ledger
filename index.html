<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, sans-serif;
      background: #111827;
      color: #f9fafb;
      margin: 0;
      padding: 0;
    }
    .wrap {
      max-width: 900px;
      margin: 16px auto 32px;
      background: #111827;
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.4);
      border: 1px solid #1f2937;
    }
    h1 {
      margin-top: 0;
      text-align: center;
      font-size: 1.3rem;
    }
    .section-title {
      margin: 12px 0 4px;
      font-size: 1rem;
      font-weight: 600;
      border-bottom: 1px solid #374151;
      padding-bottom: 4px;
    }
    .row {
      display: flex;
      gap: 8px;
      margin-bottom: 6px;
      align-items: center;
      flex-wrap: wrap;
    }
    .row label {
      min-width: 90px;
      font-size: .85rem;
    }
    input[type="text"],
    input[type="number"],
    input[type="date"],
    textarea {
      flex: 1;
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid #374151;
      background: #020617;
      color: #f9fafb;
      font-size: .9rem;
    }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type="number"] {
      -moz-appearance: textfield;
      max-width: 140px;
      text-align: center;
    }
    .items-grid {
      border: 1px solid #374151;
      border-radius: 10px;
      padding: 8px;
      margin-bottom: 10px;
      background: #020617;
    }
    .item-row {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 4px;
      align-items: center;
      font-size: .8rem;
    }
    .item-row span {
      flex: 1;
    }
    .totals {
      margin-top: 6px;
      font-size: .9rem;
    }
    .totals strong {
      color: #facc15;
    }
    button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 10px;
      border: none;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      background: #10b981;
      color: #022c22;
    }
    button:active {
      transform: translateY(1px);
      opacity: .9;
    }
    .output {
      margin-top: 12px;
      border-radius: 10px;
      border: 1px solid #374151;
      padding: 8px;
      background: #020617;
    }
    .output textarea {
      width: 100%;
      min-height: 180px;
      resize: vertical;
    }
    small {
      font-size: .75rem;
      color: #9ca3af;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠ</h1>

    <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø£Ø³ -->
    <div class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø§Ø­Ù†Ø©</div>
    <div class="row">
      <label>Ø§Ù„ØªØ§Ø¬Ø±:</label>
      <input id="traderName" type="text" placeholder="Ø¨Ø§Ø¯Ø¨ÙŠØ§Ù†ØŒ Ù‚Ø§Ø·Ø±Ù‡ Ø²ÙƒÙŠ ...">
    </div>
    <div class="row">
      <label>Ø±Ù‚Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©:</label>
      <input id="carNumber" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ù‚Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©">
    </div>
    <div class="row">
      <label>Ø§Ù„Ø³ÙˆØ§Ù‚:</label>
      <input id="driverName" type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ§Ù‚">
    </div>
    <div class="row">
      <label>Ø§Ù„ØªØ§Ø±ÙŠØ®:</label>
      <input id="date" type="date">
    </div>

    <!-- Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø¨Ø§Ù„ÙŠÙ…Ù†ÙŠ -->
    <div class="section-title">Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø¨Ø§Ù„ÙŠÙ…Ù†ÙŠ</div>
    <div class="items-grid" id="yerItems">
      <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ù…Ù† Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
    </div>

    <div class="row">
      <label>Ù…Ø¹ Ø§Ù„Ø³ÙˆØ§Ù‚ (ÙŠÙ…Ù†ÙŠ):</label>
      <input id="withDriverYer" type="number" min="0" value="0">
    </div>
    <div class="totals">
      Ø§Ù„Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø§Ù„ÙŠÙ…Ù†ÙŠ: <strong id="totalYer">0</strong><br>
      Ø§Ù„Ø§Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø¹ Ø§Ù„Ø³ÙˆØ§Ù‚: <strong id="totalYerWithDriver">0</strong>
    </div>

    <!-- Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø¨Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ -->
    <div class="section-title">Ø®Ø±Ø¬ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ</div>
    <div class="items-grid" id="sarItems">
      <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ù…Ù† Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
    </div>
    <div class="totals">
      Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø®Ø±Ø¬ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ: <strong id="totalSar">0</strong> Ø³Ø¹ÙˆØ¯ÙŠ
    </div>

    <div class="section-title">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</div>
    <textarea id="extraNotes" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø³Ø¨Ø¨ Ø§Ù„Ø²ÙŠØ§Ø¯Ø©ØŒ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù„Ù„Ù…Ø­Ø§Ø³Ø¨..."></textarea>

    <button onclick="generateStatement()">ğŸ”¢ Ø§Ø­Ø³Ø¨ Ùˆ Ø§Ù†Ø³Ø® Ø§Ù„ÙƒØ´Ù</button>

    <div class="output">
      <div style="margin-bottom:4px;">Ø§Ù„Ù†Øµ Ø§Ù„Ø¬Ø§Ù‡Ø² Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨:</div>
      <textarea id="outputText" readonly></textarea>
      <small>ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ù† Ø³Ù…Ø­ Ø§Ù„Ù…ØªØµÙØ­. ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ø§Ù‹ Ø§Ù„Ù†Ø³Ø® ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ø¨Ø§Ù„Ø¶ØºØ· Ø§Ù„Ù…Ø·ÙˆÙ‘Ù„.</small>
    </div>
  </div>

  <script>
    const yerItemsData = [
      "Ø§Ù„Ø¨ÙŠØ§Ù† ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†",
      "ØºÙŠØ«Ø§Ù†",
      "Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†",
      "Ø¨ÙˆØ§Ø¨Ø© Ø´Ø±Ù‚ÙŠØ©",
      "Ù…ÙƒØ§ÙØ­Ù‡",
      "Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ÙˆØ³Ø·Ù‰",
      "Ø§Ù„Ø´Ø±Ø·Ù‡ Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©",
      "Ø¨ÙˆØ§Ø¨Ø© ØºØ±Ø¨ÙŠÙ‡",
      "Ø¹Ø³ÙƒØ±ÙŠ Ø§Ù„Ø¬Ù‡Ø§Ø²",
      "Ø¬Ù‡Ø§Øª Ø£Ù…Ù†ÙŠØ© Ø¹Ø´Ø§Ù† Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ§Øª",
      "Ù…ÙƒØ§ØªØ¨",
      "Ø±Ù‚Ù… Ø¶Ø±ÙŠØ¨ÙŠ",
      "ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªÙØªÙŠØ´",
      "Ø§Ù„Ø­Ù…Ø§Ù„ÙŠÙ† ÙˆØ·Ø±Ù‘Ø¨Ø§Ù„",
      "Ø§Ù„ÙˆØµØ§Ø¨ÙŠ",
      "Ø¥Ø¶Ø§ÙÙŠ ÙˆØ­Ø¯Ø© Ø§Ù„Ø±ÙƒØ§Ø¨",
      "Ø­Ù‚ Ø§Ù„Ø¬ÙˆØ§Ø²",
      "Ø§Ù„Ø¬ÙˆØ¯Ù‡",
      "Ø§Ù„Ù†Ù‚Ù„",
      "Ø§Ù„Ù…ÙŠØ²Ø§Ù†",
      "ØªØ®Ù„ÙŠØµ",
      "Ù…ØµÙÙ‘ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†",
      "ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ø®Ø§Ø²Ù† / Ù…Ø¹Ø§Ù„Ù… Ø§Ù„Ù…Ø®Ø§Ø²Ù†"
    ];

    const sarItemsData = [
      "Ù…Ø¹ Ø§Ù„Ù…ÙØªØ´ÙŠÙ† ÙˆÙ…Ø¯Ø±Ø§Ø¡ Ø§Ù„ØªÙØªÙŠØ´",
      "Ø®Ø§Ù„Ø¯ Ø§Ù„Ø­Ø³Ù†",
      "Ø³Ø¹ÙˆØ¯ÙŠ Ù…Ø¹ Ø§Ù„Ø¬Ù‡Ø§Ø²",
      "Ø³Ø¹ÙˆØ¯ÙŠ Ù‚Ø³ÙŠÙ…Ù‡ / Ù„ÙˆØ­Ø© ÙŠÙ…Ù†ÙŠØ©",
      "Ø§Ù„Ù…ÙƒØªØ¨"
    ];

    function createItems(containerId, items, prefix) {
      const container = document.getElementById(containerId);
      items.forEach((name, index) => {
        const row = document.createElement("div");
        row.className = "item-row";
        const label = document.createElement("span");
        label.textContent = (index + 1) + "- " + name;
        const input = document.createElement("input");
        input.type = "number";
        input.min = "0";
        input.value = "";
        input.id = prefix + index;
        input.addEventListener("input", updateTotals);
        row.appendChild(label);
        row.appendChild(input);
        container.appendChild(row);
      });
    }

    createItems("yerItems", yerItemsData, "yer_");
    createItems("sarItems", sarItemsData, "sar_");

    function sumItems(prefix, itemsLength) {
      let total = 0;
      for (let i = 0; i < itemsLength; i++) {
        const val = parseFloat(document.getElementById(prefix + i).value || "0");
        if (!isNaN(val)) total += val;
      }
      return total;
    }

    function formatNumber(n) {
      return n.toLocaleString('ar-EG');
    }

    function formatDateForText(inputVal) {
      if (!inputVal) return "";
      const d = new Date(inputVal);
      if (isNaN(d.getTime())) return inputVal;
      const day = d.getDate();
      const month = d.getMonth() + 1;
      const year = d.getFullYear();
      return `${day}/${month}/${year}`;
    }

    function updateTotals() {
      const totalYer = sumItems("yer_", yerItemsData.length);
      document.getElementById("totalYer").textContent = formatNumber(totalYer);

      const withDriver = parseFloat(document.getElementById("withDriverYer").value || "0");
      const totalWithDriver = totalYer + (isNaN(withDriver) ? 0 : withDriver);
      document.getElementById("totalYerWithDriver").textContent = formatNumber(totalWithDriver);

      const totalSar = sumItems("sar_", sarItemsData.length);
      document.getElementById("totalSar").textContent = formatNumber(totalSar);
    }

    document.getElementById("withDriverYer").addEventListener("input", updateTotals);

    function generateStatement() {
      updateTotals();

      const trader = document.getElementById("traderName").value.trim();
      const carNumber = document.getElementById("carNumber").value.trim();
      const driver = document.getElementById("driverName").value.trim();
      const dateRaw = document.getElementById("date").value;
      const dateText = formatDateForText(dateRaw);
      const extra = document.getElementById("extraNotes").value.trim();

      const totalYer = sumItems("yer_", yerItemsData.length);
      const withDriver = parseFloat(document.getElementById("withDriverYer").value || "0");
      const totalWithDriver = totalYer + (isNaN(withDriver) ? 0 : withDriver);
      const totalSar = sumItems("sar_", sarItemsData.length);

      let lines = [];

      if (trader) lines.push(trader);
      if (carNumber) lines.push("Ø±Ù‚Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©: " + carNumber);
      if (driver) lines.push("Ø§Ù„Ø³ÙˆØ§Ù‚: " + driver);
      if (dateText) lines.push("Ø§Ù„ØªØ§Ø±ÙŠØ®: " + dateText);
      lines.push("");

      let indexNum = 1;
      for (let i = 0; i < yerItemsData.length; i++) {
        const val = parseFloat(document.getElementById("yer_" + i).value || "0");
        if (!isNaN(val) && val > 0) {
          lines.push(`${indexNum}- ${formatNumber(val)} ${yerItemsData[i]}`);
          indexNum++;
        }
      }

      lines.push("--------------");
      lines.push("Ø§Ù„Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø¨Ø§Ù„ÙŠÙ…Ù†ÙŠ: " + formatNumber(totalYer));

      if (!isNaN(withDriver) && withDriver > 0) {
        const driverLabel = driver ? ` Ù…Ø¹ Ø§Ù„Ø³ÙˆØ§Ù‚ ${driver}` : " Ù…Ø¹ Ø§Ù„Ø³ÙˆØ§Ù‚";
        lines.push("+");
        lines.push(formatNumber(withDriver) + " ÙŠÙ…Ù†ÙŠ" + driverLabel);
        lines.push("--------------");
        lines.push("Ø§Ù„Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø´Ø­Ù†Ø© Ø¨Ø§Ù„ÙŠÙ…Ù†ÙŠ: " + formatNumber(totalWithDriver));
      } else {
        lines.push("--------------");
        lines.push("Ø§Ù„Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø´Ø­Ù†Ø© Ø¨Ø§Ù„ÙŠÙ…Ù†ÙŠ: " + formatNumber(totalYer));
      }

      lines.push("");
      lines.push("Ø®Ø±Ø¬ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ:");
      let anySar = false;
      for (let i = 0; i < sarItemsData.length; i++) {
        const val = parseFloat(document.getElementById("sar_" + i).value || "0");
        if (!isNaN(val) && val > 0) {
          lines.push(`${formatNumber(val)} ${sarItemsData[i]}`);
          anySar = true;
        }
      }
      if (anySar) {
        lines.push("--------------");
        lines.push("Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø®Ø±Ø¬ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ: " + formatNumber(totalSar) + " Ø³Ø¹ÙˆØ¯ÙŠ");
      } else {
        lines.push("Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø®Ø±Ø¬ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ: 0 Ø³Ø¹ÙˆØ¯ÙŠ");
      }

      if (extra) {
        lines.push("");
        lines.push("Ù…Ù„Ø§Ø­Ø¸Ø§Øª:");
        lines.push(extra);
      }

      const text = lines.join("\n");
      const out = document.getElementById("outputText");
      out.value = text;

      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).catch(() => {});
      }
      out.focus();
      out.select();
    }
  </script>
</body>
</html>
